import{j as e,F as P,b as k,a as S}from"./index-BNWujJOy.js";import{d as C,u as R,r as s,L as g}from"./vendor-C-9pyWRM.js";import"./icons-4heOFlV7.js";import"./swiper-CLjMzi4o.js";function T(){const[o]=C(),h=R(),[m,b]=s.useState(""),[d,f]=s.useState(""),[l,p]=s.useState(""),[i,w]=s.useState(""),[c,a]=s.useState(""),[j,n]=s.useState(!1),[u,x]=s.useState(!1),[y,N]=s.useState(!1);s.useEffect(()=>{const t=o.get("token"),r=o.get("email");!t||!r?(a("Invalid reset link. Please request a new password reset."),n(!1)):(b(t),f(r))},[o]);const v=async t=>{if(t.preventDefault(),l!==i){a("Passwords do not match."),n(!1);return}if(l.length<8){a("Password must be at least 8 characters long."),n(!1);return}x(!0),a("");try{const r=await S.resetPassword(m,d,l,i);N(!0),n(!0),a(r.message||"Password reset successfully!"),setTimeout(()=>{h("/login",{state:{message:"Password reset successfully. Please log in with your new password."}})},3e3)}catch(r){n(!1),a(r.message||"Failed to reset password. The link may be invalid or expired.")}finally{x(!1)}};return y?e.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-16 bg-gray-50",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"bg-white rounded-xl border p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 text-green-600",children:e.jsx(P,{className:"w-full h-full"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Password Reset!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:c}),e.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting you to login..."}),e.jsx(g,{to:"/login",className:"inline-block mt-4 text-brand-600 hover:text-brand-700 font-medium",children:"Go to Login Now →"})]})})}):e.jsx("div",{className:"max-w-md mx-auto px-4 py-16",children:e.jsxs("div",{className:"bg-white rounded-xl border p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2 text-center",children:"Reset Your Password"}),e.jsxs("p",{className:"text-gray-500 text-sm text-center mb-6",children:["Enter a new password for ",e.jsx("strong",{children:d})]}),c&&e.jsxs("div",{className:`px-4 py-2 rounded-lg mb-4 text-sm flex items-start gap-2 ${j?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:[e.jsx(k,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:c})]}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsx("input",{type:"password",value:l,onChange:t=>p(t.target.value),required:!0,autoFocus:!0,placeholder:"Enter new password",className:"w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must be at least 8 characters with mixed case and numbers"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),e.jsx("input",{type:"password",value:i,onChange:t=>w(t.target.value),required:!0,placeholder:"Confirm new password",className:"w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-500"})]}),e.jsx("button",{type:"submit",disabled:u||!m||!d,className:"w-full bg-brand-600 text-white py-2.5 rounded-lg hover:bg-brand-700 font-medium disabled:opacity-50",children:u?"Resetting Password...":"Reset Password"})]}),e.jsx("p",{className:"text-center text-gray-500 text-sm mt-6",children:e.jsx(g,{to:"/login",className:"text-brand-600 hover:text-brand-700",children:"← Back to Sign In"})})]})})}export{T as default};
