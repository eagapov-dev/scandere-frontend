import{a as p,j as e,k as F,A as C,B as A,i as y}from"./index-I6iB4g_A.js";import{r as i}from"./vendor-C-9pyWRM.js";import{A as k}from"./AdminLayout-DYz0I3E8.js";import"./icons-4heOFlV7.js";import"./swiper-CLjMzi4o.js";function P(){const[s,f]=i.useState(null),[N,o]=i.useState(!0),[m,x]=i.useState(!1),[r,b]=i.useState({subject:"",content:""}),[n,c]=i.useState({}),[u,h]=i.useState("");i.useEffect(()=>{g()},[]);const g=async()=>{try{o(!0);const t=await p.getNewsletterStats();f(t)}catch(t){console.error("Failed to load stats:",t),alert("Failed to load newsletter statistics")}finally{o(!1)}},j=t=>{const{name:l,value:a}=t.target;b(d=>({...d,[l]:a})),n[l]&&c(d=>({...d,[l]:""}))},v=()=>{const t={};return r.subject.trim()?r.subject.length>255&&(t.subject="Subject must be less than 255 characters"):t.subject="Subject is required",r.content.trim()?r.content.length>1e4&&(t.content="Content must be less than 10,000 characters"):t.content="Message content is required",c(t),Object.keys(t).length===0},w=async t=>{if(t.preventDefault(),h(""),!v())return;if(!s||s.active_subscribers===0){alert("No active subscribers to send to!");return}if(window.confirm(`Are you sure you want to send this newsletter to ${s.active_subscribers} active subscribers?

Subject: ${r.subject}

This action cannot be undone.`))try{x(!0);const a=await p.sendNewsletterCampaign(r);h(a.message||"Newsletter campaign sent successfully!"),b({subject:"",content:""}),g()}catch(a){console.error("Failed to send campaign:",a),a.errors?c(a.errors):alert(a.message||"Failed to send newsletter campaign")}finally{x(!1)}},S=()=>{const t=`
Subject: ${r.subject||"(no subject)"}

---

${r.content||"(no content)"}

---

[Browse Our Products Button]

Thank you for being part of the Scandere AI community!

Best regards,
The Scandere AI Team

---
You're receiving this email because you subscribed to the Scandere AI newsletter.
[Unsubscribe Link]
    `.trim();alert(t)};return e.jsx(k,{children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-10",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Newsletter Campaign"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Send email campaigns to all active subscribers"})]}),!N&&s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Total Subscribers"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.total_subscribers})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(F,{className:"text-blue-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-xl border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Active Subscribers"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:s.active_subscribers}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Will receive this campaign"})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(C,{className:"text-green-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-xl border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Unsubscribed"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.unsubscribed})]}),e.jsx("div",{className:"bg-gray-100 p-3 rounded-lg",children:e.jsx(A,{className:"text-gray-600",size:24})})]})})]}),u&&e.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"text-green-600"}),e.jsx("span",{children:u})]})}),e.jsxs("div",{className:"bg-white rounded-xl border p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Create Newsletter Campaign"}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Subject ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"subject",name:"subject",value:r.subject,onChange:j,placeholder:"e.g., New AI Tools Released!",maxLength:255,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-transparent ${n.subject?"border-red-500":"border-gray-300"}`}),n.subject&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.subject}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[r.subject.length,"/255 characters"]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:["Message Content ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"content",name:"content",value:r.content,onChange:j,rows:12,placeholder:`Write your newsletter message here...

Example:
Hello subscribers!

We're excited to announce new AI tools available in our store.

Check them out today and get 20% off with code: NEW20

Best regards,
The Team`,maxLength:1e4,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-transparent font-mono text-sm ${n.content?"border-red-500":"border-gray-300"}`}),n.content&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.content}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[r.content.length,"/10,000 characters ‚Ä¢ Supports line breaks"]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"‚ÑπÔ∏è Campaign Details"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:["‚Ä¢ Emails will be sent to ",e.jsx("strong",{children:(s==null?void 0:s.active_subscribers)||0})," active subscribers"]}),e.jsx("li",{children:"‚Ä¢ All emails are queued and sent in the background"}),e.jsx("li",{children:"‚Ä¢ Unsubscribe link is automatically included"}),e.jsx("li",{children:'‚Ä¢ "Browse Products" button is added to each email'}),e.jsx("li",{children:"‚Ä¢ Failed emails will be retried 3 times automatically"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:S,disabled:!r.subject&&!r.content,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Preview"}),e.jsx("button",{type:"submit",disabled:m||!s||s.active_subscribers===0,className:"flex-1 flex items-center justify-center gap-2 bg-brand-600 text-white px-6 py-2 rounded-lg hover:bg-brand-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{size:18}),"Send Campaign to ",(s==null?void 0:s.active_subscribers)||0," Subscribers"]})})]}),(s==null?void 0:s.active_subscribers)===0&&e.jsx("p",{className:"text-sm text-red-500 text-center",children:"‚ö†Ô∏è No active subscribers found. Cannot send campaign."})]})]}),e.jsxs("div",{className:"mt-8 bg-gray-50 rounded-xl border p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"üí° Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Content Tips:"}),e.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Keep subject lines short and compelling"}),e.jsx("li",{children:"Personalize when possible"}),e.jsx("li",{children:"Include a clear call-to-action"}),e.jsx("li",{children:"Keep content concise and valuable"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Timing:"}),e.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Best days: Tuesday - Thursday"}),e.jsx("li",{children:"Best time: 10 AM - 2 PM"}),e.jsx("li",{children:"Avoid: Monday mornings, Friday evenings"}),e.jsx("li",{children:"Frequency: Max once per week"})]})]})]})]})]})})}export{P as default};
