import{a as o,j as e,y as N,z as w,d as _,A as F,b as S,c as U,m as k}from"./index-QL_l2HKz.js";import{r}from"./vendor-CYrxFWZT.js";import{A}from"./AdminLayout-BTkHXMkf.js";import"./icons-CVqXpeR9.js";import"./swiper-CLjMzi4o.js";function E(){const[x,u]=r.useState([]),[g,m]=r.useState(!0),[n,h]=r.useState(""),[l,f]=r.useState("all"),[t,y]=r.useState(null),[i,d]=r.useState(1);r.useEffect(()=>{c()},[i,n,l]);const c=async()=>{try{m(!0);const a=new URLSearchParams({page:i,per_page:20});n&&a.append("search",n),l==="admin"&&a.append("is_admin","true"),l==="verified"&&a.append("verified","true"),l==="unverified"&&a.append("verified","false");const s=await o.get(`/admin/users?${a}`);u(s.data),y({currentPage:s.current_page,lastPage:s.last_page,total:s.total})}catch(a){console.error("Failed to load users:",a),alert("Failed to load users")}finally{m(!1)}},j=async a=>{if(confirm(`${a.is_admin?"Remove":"Grant"} admin privileges for ${a.name}?`))try{await o.patch(`/admin/users/${a.id}/admin-status`,{is_admin:!a.is_admin}),c(),alert("User admin status updated successfully")}catch(s){console.error("Failed to update admin status:",s),alert("Failed to update admin status")}},b=async a=>{if(confirm(`Are you sure you want to delete ${a.name}? This action cannot be undone.`))try{await o.delete(`/admin/users/${a.id}`),c(),alert("User deleted successfully")}catch(s){console.error("Failed to delete user:",s),alert(s.message||"Failed to delete user")}},v=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never";return e.jsx(A,{children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-10",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(N,{className:"text-brand-600"}),"Users Management"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:t?`Total ${t.total} users`:"Loading..."})]})}),e.jsx("div",{className:"bg-white rounded-xl border p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:n,onChange:a=>{h(a.target.value),d(1)},className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500"})]}),e.jsx("div",{className:"flex gap-2",children:[{value:"all",label:"All Users"},{value:"admin",label:"Admins"},{value:"verified",label:"Verified"},{value:"unverified",label:"Unverified"}].map(a=>e.jsx("button",{onClick:()=>{f(a.value),d(1)},className:`px-4 py-2 rounded-lg font-medium transition-colors ${l===a.value?"bg-brand-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:a.label},a.value))})]})}),e.jsxs("div",{className:"bg-white rounded-xl border overflow-hidden",children:[g?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading users..."}):x.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No users found"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:x.map(a=>{var s,p;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-10 h-10 rounded-full bg-brand-100 text-brand-600 flex items-center justify-center font-semibold",children:[(s=a.first_name)==null?void 0:s[0],(p=a.last_name)==null?void 0:p[0]]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:a.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",a.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-900",children:[e.jsx(_,{className:"text-gray-400"}),a.email]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[a.is_admin&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[e.jsx(F,{className:"w-3 h-3"}),"Admin"]}),a.email_verified_at?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(S,{className:"w-3 h-3"}),"Verified"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(U,{className:"w-3 h-3"}),"Unverified"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v(a.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>j(a),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${a.is_admin?"bg-purple-100 text-purple-700 hover:bg-purple-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:a.is_admin?"Remove Admin":"Make Admin"}),e.jsx("button",{onClick:()=>b(a),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete user",children:e.jsx(k,{className:"w-4 h-4"})})]})})]},a.id)})})]})}),t&&t.lastPage>1&&e.jsxs("div",{className:"px-6 py-4 border-t flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Page ",t.currentPage," of ",t.lastPage]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d(i-1),disabled:i===1,className:"px-4 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>d(i+1),disabled:i===t.lastPage,className:"px-4 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})})}export{E as default};
