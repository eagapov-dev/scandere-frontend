import{a as u,j as e,y as j,z as y,A as N,q as f}from"./index-iYeVClBp.js";import{r as l}from"./vendor-CYrxFWZT.js";import{A as b}from"./AdminLayout-CeiQ4euZ.js";import"./icons-CVqXpeR9.js";import"./swiper-CLjMzi4o.js";function O(){var o;const[t,m]=l.useState(null),[p,n]=l.useState(!0),[x,h]=l.useState(new Set);l.useEffect(()=>{d()},[]);const d=async(s=1)=>{try{n(!0);const a=await u.getAdminOrders();m(a)}catch(a){console.error("Failed to load orders:",a),alert("Failed to load orders")}finally{n(!1)}},g=s=>{const a=new Set(x);a.has(s)?a.delete(s):a.add(s),h(a)},i={total_revenue:(t==null?void 0:t.total_revenue)||0,total_orders:(t==null?void 0:t.total_orders)||0},c=((o=t==null?void 0:t.orders)==null?void 0:o.data)||[];return e.jsx(b,{children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-10",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Orders"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"All customer orders and purchases"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",parseFloat(i.total_revenue).toFixed(2)]})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(j,{className:"text-green-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-xl border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Total Orders"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:i.total_orders})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(y,{className:"text-blue-600",size:24})})]})})]}),p?e.jsx("div",{className:"text-center py-20 text-gray-400",children:"Loading..."}):e.jsxs("div",{className:"bg-white rounded-xl border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Payment Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Details"})]})}),e.jsx("tbody",{children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-400",children:"No orders found."})}):c.map(s=>{var a;return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["#",s.id]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[s.user.first_name," ",s.user.last_name]}),e.jsx("div",{className:"text-gray-500 text-xs",children:s.user.email})]})}),e.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["$",parseFloat(s.total).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.status==="completed"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:s.payment_method==="free"?"Free":"Stripe"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:s.paid_at?new Date(s.paid_at).toLocaleDateString():"â€”"}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("button",{onClick:()=>g(s.id),className:"text-brand-600 hover:text-brand-700",children:x.has(s.id)?e.jsx(N,{size:20}):e.jsx(f,{size:20})})})]},s.id),x.has(s.id)&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 bg-gray-50",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Order Items:"}),(a=s.items)==null?void 0:a.map(r=>e.jsxs("div",{className:"flex items-center justify-between py-2 px-4 bg-white rounded border",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.product.title}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Quantity: ",r.quantity]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["$",parseFloat(r.price).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Subtotal: $",(parseFloat(r.price)*r.quantity).toFixed(2)]})]})]},r.id))]})})})]})})})]})}),(t==null?void 0:t.last_page)>1&&e.jsxs("div",{className:"px-6 py-4 border-t flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",t.from," to ",t.to," of ",t.total," orders"]}),e.jsxs("div",{className:"flex gap-2",children:[t.current_page>1&&e.jsx("button",{onClick:()=>d(t.current_page-1),className:"px-3 py-1 text-sm border rounded hover:bg-gray-50",children:"Previous"}),t.current_page<t.last_page&&e.jsx("button",{onClick:()=>d(t.current_page+1),className:"px-3 py-1 text-sm border rounded hover:bg-gray-50",children:"Next"})]})]})]})]})})}export{O as default};
