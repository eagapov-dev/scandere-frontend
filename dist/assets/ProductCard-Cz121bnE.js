import{u as p,f as h,j as s,i as m,m as f,h as b}from"./index-BNWujJOy.js";import{L as j}from"./vendor-C-9pyWRM.js";function N({product:e,compact:t=!1}){const{user:i,purchasedProductIds:n}=p(),{addToCart:l}=h(),o=n.includes(e.id),x=async r=>{if(r.preventDefault(),r.stopPropagation(),!i){window.location.href="/login";return}try{await l(e.id)}catch(g){alert(g.message||"Failed to add.")}},d={pdf:"bg-red-100 text-red-700",xlsx:"bg-green-100 text-green-700",docx:"bg-blue-100 text-blue-700"}[e.file_type]||"bg-gray-100 text-gray-700",a=e.original_price&&parseFloat(e.original_price)>parseFloat(e.price),c=a?Math.round((parseFloat(e.original_price)-parseFloat(e.price))/parseFloat(e.original_price)*100):0;return s.jsxs(j,{to:`/products/${e.slug}`,className:"group bg-white rounded-xl border hover:shadow-lg transition-all duration-200 overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"relative bg-gradient-to-br from-gray-50 to-gray-100 p-8 flex items-center justify-center",children:[s.jsx(m,{size:t?36:48,className:"text-gray-300 group-hover:text-brand-400 transition"}),a&&s.jsxs("span",{className:"absolute top-3 left-3 text-xs font-bold px-2 py-1 rounded bg-gradient-to-r from-red-600 to-orange-600 text-white",children:["SAVE ",c,"%"]}),e.file_type&&s.jsx("span",{className:`absolute top-3 right-3 text-xs font-bold px-2 py-0.5 rounded ${d}`,children:e.file_type.toUpperCase()})]}),s.jsxs("div",{className:"p-5 flex flex-col flex-1",children:[e.category&&s.jsx("span",{className:"text-xs font-medium text-brand-600 uppercase tracking-wide mb-1",children:e.category.name}),s.jsx("h3",{className:"font-semibold text-gray-900 mb-2 group-hover:text-brand-600 transition leading-snug",children:e.title}),!t&&e.short_description&&s.jsx("p",{className:"text-gray-500 text-sm mb-4 line-clamp-2 flex-1",children:e.short_description}),s.jsxs("div",{className:"flex items-center justify-between mt-auto pt-3 border-t",children:[s.jsx("div",{className:"flex flex-col",children:e.is_free?s.jsx("span",{className:"text-lg font-bold text-green-600",children:"Free"}):s.jsxs(s.Fragment,{children:[e.original_price&&parseFloat(e.original_price)>parseFloat(e.price)&&s.jsxs("span",{className:"text-xs text-gray-400 line-through",children:["$",parseFloat(e.original_price).toFixed(2)]}),s.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["$",parseFloat(e.price).toFixed(2)]})]})}),o?s.jsxs("div",{className:"flex items-center gap-1 bg-green-100 text-green-700 text-sm px-3 py-1.5 rounded-lg font-medium",children:[s.jsx(f,{size:14}),s.jsx("span",{children:"Purchased"})]}):s.jsxs("button",{onClick:x,className:"flex items-center gap-1 bg-brand-600 text-white text-sm px-3 py-1.5 rounded-lg hover:bg-brand-700 transition",children:[s.jsx(b,{size:14}),s.jsx("span",{children:"Add"})]})]})]})]})}export{N as P};
