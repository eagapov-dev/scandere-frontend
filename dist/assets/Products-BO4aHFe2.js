import{u as b,b as j,j as e,F as y,c as N,a as h}from"./index-BqaoAOxT.js";import{r as x,d as v}from"./vendor-C-9pyWRM.js";import{P as w}from"./ProductCard-h3CSeTA9.js";import"./icons-4heOFlV7.js";import"./swiper-CLjMzi4o.js";function P({bundle:s,compact:p=!1}){var l;const{user:u}=b(),{addBundle:m}=j(),o=async i=>{if(i.preventDefault(),i.stopPropagation(),!u){window.location.href="/login";return}try{await m(s.id)}catch(d){alert(d.message||"Failed to add.")}},n=((l=s.products)==null?void 0:l.reduce((i,d)=>i+parseFloat(d.price),0))||parseFloat(s.original_price||0),r=parseFloat(s.price),g=n-r,a=n>0?Math.round(g/n*100):0;return e.jsxs("div",{className:"group bg-white rounded-xl border hover:shadow-lg transition-all duration-200 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"relative bg-gradient-to-br from-orange-50 to-red-50 p-8 flex items-center justify-center",children:[e.jsx(y,{size:p?36:48,className:"text-orange-400 group-hover:text-orange-500 transition"}),a>0&&e.jsxs("span",{className:"absolute top-3 left-3 text-xs font-bold px-2 py-1 rounded bg-gradient-to-r from-red-600 to-orange-600 text-white",children:["SAVE ",a,"%"]}),e.jsx("span",{className:"absolute top-3 right-3 text-xs font-bold px-2 py-0.5 rounded bg-orange-100 text-orange-700",children:"BUNDLE"})]}),e.jsxs("div",{className:"p-5 flex flex-col flex-1",children:[e.jsx("span",{className:"text-xs font-medium text-orange-600 uppercase tracking-wide mb-1",children:"Bundle Deal"}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2 group-hover:text-brand-600 transition leading-snug",children:s.title}),!p&&s.description&&e.jsx("p",{className:"text-gray-500 text-sm mb-4 line-clamp-2 flex-1",children:s.description}),s.products&&s.products.length>0&&e.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["Includes ",s.products.length," products"]}),e.jsxs("div",{className:"flex items-center justify-between mt-auto pt-3 border-t",children:[e.jsxs("div",{className:"flex flex-col",children:[a>0&&e.jsxs("span",{className:"text-xs text-gray-400 line-through",children:["$",n.toFixed(2)]}),e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["$",r.toFixed(2)]}),g>0&&e.jsxs("span",{className:"text-xs text-green-600 font-medium",children:["Save $",g.toFixed(2)]})]}),e.jsxs("button",{onClick:o,className:"flex items-center gap-1 bg-orange-600 text-white text-sm px-3 py-1.5 rounded-lg hover:bg-orange-700 transition",children:[e.jsx(N,{size:14}),e.jsx("span",{children:"Add"})]})]})]})]})}function A(){var d;const[s,p]=x.useState({data:[]}),[u,m]=x.useState([]),[o,n]=v(),[r,g]=x.useState(o.get("search")||""),a=o.get("category")||"",l=a==="bundles";x.useEffect(()=>{h.getCategories().then(t=>{console.log("=== CATEGORIES LOADED ==="),console.log("Total categories:",t.length),console.log("All categories:",t),t.forEach((c,f)=>{console.log(`${f+1}. ${c.name} (slug: ${c.slug}, id: ${c.id})`)}),console.log("========================"),m(t)}).catch(t=>{console.error("Failed to load categories:",t)})},[]),x.useEffect(()=>{const t=new URLSearchParams;a&&t.set("category",a),o.get("search")&&t.set("search",o.get("search")),o.get("page")&&t.set("page",o.get("page")),h.getProducts(`?${t}`).then(p).catch(()=>{})},[a,o]);const i=t=>{t.preventDefault();const c={};a&&(c.category=a),r&&(c.search=r),n(c)};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-10",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:l?"Bundle Deals":"Products"}),e.jsx("p",{className:"text-gray-500 mb-8",children:l?"Get multiple products together and save big!":"Templates, checklists, and guides for your business"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[e.jsxs("form",{onSubmit:i,className:"flex-1 flex gap-2",children:[e.jsx("input",{type:"text",value:r,onChange:t=>g(t.target.value),placeholder:"Search products...",className:"flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-500"}),e.jsx("button",{type:"submit",className:"bg-brand-600 text-white px-5 py-2 rounded-lg hover:bg-brand-700 text-sm font-medium",children:"Search"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>n(r?{search:r}:{}),className:`px-3 py-1.5 rounded-full text-sm font-medium ${a?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-brand-600 text-white"}`,children:"All"}),u.length>0?u.map(t=>e.jsx("button",{onClick:()=>n({category:t.slug,...r&&{search:r}}),className:`px-3 py-1.5 rounded-full text-sm font-medium ${a===t.slug?"bg-brand-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:t.name},t.id)):e.jsx("span",{className:"text-gray-400 text-sm",children:"Loading categories..."})]})]}),((d=s.data)==null?void 0:d.length)>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l?s.data.map(t=>e.jsx(P,{bundle:t},t.id)):s.data.map(t=>e.jsx(w,{product:t},t.id))}):e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-400 text-lg",children:l?"No bundles found.":"No products found."})})]})}export{A as default};
